"use strict";(self.webpackChunksophgo_wiki_1=self.webpackChunksophgo_wiki_1||[]).push([[8081],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=r,k=c["".concat(o,".").concat(u)]||c[u]||m[u]||i;return n?a.createElement(k,s(s({ref:t},d),{},{components:n})):a.createElement(k,s({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=u;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[c]="string"==typeof e?e:r,s[1]=l;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6161:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_label:"Setting Up",sidebar_position:20},s="Set up the working environment",l={unversionedId:"duo/getting-started/setup",id:"duo/getting-started/setup",title:"Set up the working environment",description:"USBnet setup",source:"@site/docs/duo/getting-started/setup.md",sourceDirName:"duo/getting-started",slug:"/duo/getting-started/setup",permalink:"/SG2042-Wiki/docs/duo/getting-started/setup",draft:!1,editUrl:"https://github.com/sophgocommunity/SG2042-Wiki/tree/docusaurus/docs/duo/getting-started/setup.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_label:"Setting Up",sidebar_position:20},sidebar:"techSidebar",previous:{title:"Boot the Duo",permalink:"/SG2042-Wiki/docs/duo/getting-started/boot"},next:{title:"App Development",permalink:"/SG2042-Wiki/docs/duo/app-dev"}},o={},p=[{value:"USBnet setup",id:"usbnet-setup",level:2},{value:"Windows",id:"windows",level:3},{value:"Linux",id:"linux",level:3},{value:"macOS",id:"macos",level:3},{value:"SSH",id:"ssh",level:2},{value:"Serial Console",id:"serial-console",level:2},{value:"USB to TTL serial cable",id:"usb-to-ttl-serial-cable",level:3},{value:"Connection",id:"connection",level:3},{value:"sysroot",id:"sysroot",level:2}],d={toc:p},c="wrapper";function m(e){let{components:t,...i}=e;return(0,r.kt)(c,(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"set-up-the-working-environment"},"Set up the working environment"),(0,r.kt)("h2",{id:"usbnet-setup"},"USBnet setup"),(0,r.kt)("p",null,"We have enabled RNDIS and DHCP on the system by default in order to use USB network."),(0,r.kt)("h3",{id:"windows"},"Windows"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Connect the Duo to the computer via Type-C cable")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'The "RNDIS" device appear in the Device Manager'))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step1",src:n(1581).Z,width:"410",height:"460"})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},'Select "RNDIS" and right click to update the driver')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step2",src:n(7815).Z,width:"410",height:"460"})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'Select "Browse my computer for drivers"')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step3",src:n(686).Z,width:"618",height:"460"})),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},'Select "Let me pick from a list of available drivers on my computer"')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step4",src:n(6722).Z,width:"619",height:"460"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},'Select "Network adapters"')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step5",src:n(8197).Z,width:"618",height:"460"})),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Manufacturer/Model: Microsoft/USB RNDIS Adapter")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step6",src:n(7810).Z,width:"618",height:"461"})),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Ignore warning message")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step7",src:n(3135).Z,width:"616",height:"459"})),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"Driver update successful")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step8",src:n(9088).Z,width:"619",height:"461"})),(0,r.kt)("ol",{start:10},(0,r.kt)("li",{parentName:"ol"},'Check "USB RNDIS Adapter"')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step9",src:n(4973).Z,width:"409",height:"458"})),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"Find the IP and test the network using ping")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-step10",src:n(9361).Z,width:"429",height:"460"})),(0,r.kt)("h3",{id:"linux"},"Linux"),(0,r.kt)("p",null,"In general, Linux can use RNDIS without configuration."),(0,r.kt)("p",null,"You can use command ip to check the usb0 network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"neko@milk-v:~ sudo dmesg | grep usb0\n[1055270.386719] rndis_host 1-2.1:1.0 usb0: register 'rndis_host' at usb-0000:00:14.0-2.1, RNDIS device, aa:53:5d:bb:7f:28\n[1055270.423753] rndis_host 1-2.1:1.0 enxaa535dbb7f28: renamed from usb0\nneko@milk-v:~ ip addr show enxaa535dbb7f28\n15: enxaa535dbb7f28: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 1000\n    link/ether 42:a2:79:19:7f:e3 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.42.69/24 brd 192.168.42.255 scope global dynamic noprefixroute enp0s20f0u1\n       valid_lft 3569sec preferred_lft 3569sec\n    inet6 fe80::3c92:ed74:3475:cb9c/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\nneko@milk-v:~ ping 192.168.42.1 -c 5\nPING 192.168.42.1 (192.168.42.1) 56(84) bytes of data.\n64 bytes from 192.168.42.1: icmp_seq=1 ttl=64 time=0.334 ms\n64 bytes from 192.168.42.1: icmp_seq=2 ttl=64 time=0.287 ms\n64 bytes from 192.168.42.1: icmp_seq=3 ttl=64 time=0.275 ms\n64 bytes from 192.168.42.1: icmp_seq=4 ttl=64 time=0.287 ms\n64 bytes from 192.168.42.1: icmp_seq=5 ttl=64 time=0.266 ms\n\n--- 192.168.42.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4096ms\nrtt min/avg/max/mdev = 0.266/0.289/0.334/0.031 ms\nneko@milk-v:~\n")),(0,r.kt)("h3",{id:"macos"},"macOS"),(0,r.kt)("p",null,"There is no official driver for RNDIS. We need to install ",(0,r.kt)("a",{parentName:"p",href:"https://joshuawise.com/horndis"},"HoRNDIS"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Download HoRNDIS driver")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Intel ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/jwise/HoRNDIS/releases"},"https://github.com/jwise/HoRNDIS/releases")),(0,r.kt)("li",{parentName:"ul"},"Apple silicon ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/jwise/HoRNDIS/files/7323710/HoRNDIS-M1.zip"},"https://github.com/jwise/HoRNDIS/files/7323710/HoRNDIS-M1.zip"))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Disable System Integrity Protection"),(0,r.kt)("p",{parentName:"li"},"a. Enter macOS recovery"),(0,r.kt)("p",{parentName:"li"},"Please refer ",(0,r.kt)("a",{parentName:"p",href:"https://support.apple.com/en-hk/guide/mac-help/mchl338cf9a8/mac"},"macOS User Guide -> Recovery")," to enter recovery mode."),(0,r.kt)("p",{parentName:"li"},"b. Open the terminal and type the following command"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"}," csrutil disable\n\n csrutil enable --without kext\n")),(0,r.kt)("p",{parentName:"li"},"c. Restart the Mac")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the Kext extension in the zip pack")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Check the network settings"))),(0,r.kt)("h2",{id:"ssh"},"SSH"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the terminal, type ",(0,r.kt)("strong",{parentName:"li"},"ssh ",(0,r.kt)("a",{parentName:"strong",href:"mailto:root@192.168.42.1"},"root@192.168.42.1")),", and answer yes")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-ssh1",src:n(4744).Z,width:"428",height:"459"})),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enter the password ",(0,r.kt)("strong",{parentName:"p"},"milkv")),(0,r.kt)("p",{parentName:"li"},"(The password will not be displayed on the screen)"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-ssh2",src:n(1931).Z,width:"429",height:"460"})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Login successful")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rndis-ssh3",src:n(757).Z,width:"427",height:"460"})),(0,r.kt)("h2",{id:"serial-console"},"Serial Console"),(0,r.kt)("h3",{id:"usb-to-ttl-serial-cable"},"USB to TTL serial cable"),(0,r.kt)("p",null,"Each pin of a USB-to-TTL cable is defined as follows:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"usb2ttl",src:n(8712).Z,width:"4096",height:"3072"})),(0,r.kt)("h3",{id:"connection"},"Connection"),(0,r.kt)("p",null,"Connect USB to TTL serial cable as shown below. Do not connect the red wire."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Milk-V Duo"),(0,r.kt)("th",{parentName:"tr",align:null},"<---\x3e"),(0,r.kt)("th",{parentName:"tr",align:null},"USB to TTL"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TX (pin 16)"),(0,r.kt)("td",{parentName:"tr",align:null},"<---\x3e"),(0,r.kt)("td",{parentName:"tr",align:null},"White wire")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RX (pin 17)"),(0,r.kt)("td",{parentName:"tr",align:null},"<---\x3e"),(0,r.kt)("td",{parentName:"tr",align:null},"Green wire")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GND (pin 18)"),(0,r.kt)("td",{parentName:"tr",align:null},"<---\x3e"),(0,r.kt)("td",{parentName:"tr",align:null},"Black wire")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"duo-serial",src:n(89).Z,width:"5792",height:"4344"})),(0,r.kt)("p",null,"The default serial setting for Duo u-boot and kernel console is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"   baudrate: 115200\n   data bit: 8\n   stop bit: 1\n   parity  : none\n   flow control: none\n")),(0,r.kt)("h2",{id:"sysroot"},"sysroot"))}m.isMDXComponent=!0},89:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/duo-serial-62cb7dabc5d99827419201615fe124c1.jpg"},4744:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-ssh1-ce46678f700b411fe2e475cb70d69da5.png"},1931:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-ssh2-c3316ca52d707ead73cb840138b2e2fc.png"},757:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-ssh3-b6061a557af131dbb17155fc86d2584d.png"},1581:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step1-ec7c0a6fee7c25d633ed5b132fa08397.png"},9361:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step10-6784e46c72b083eac4f1da6ebff5f7f9.png"},7815:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step2-0aa16a878e347fa2470184ee54a5db16.png"},686:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step3-374dc22300bdb04c3af90017ad1fb264.png"},6722:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step4-a58f3e0adbdd28435c3ae68e22e448c6.png"},8197:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step5-a84dd3455c606b658ac4f1d8710d4fb1.png"},7810:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step6-82994804d908d8b976a04034af874289.png"},3135:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step7-edc1e41baa18f2cdf9995b26cbfe8d1b.png"},9088:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step8-3b4d4fb7571082248b48ef54ea8e5246.png"},4973:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rndis-step9-2e3cbfc5060e072436d3526ac98b5fd1.png"},8712:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/usb2ttl-ddb05765ffc59728820162ad515dd23a.jpg"}}]);